export function generateConvexRule(): string {
	return `---
description: Convex backend conventions and safety rules
globs:
  - apps/web/convex/**
  - apps/web/lib/auth*.ts
---

## Convex Conventions

- **Never edit** files in \`convex/_generated/\` — they are auto-generated by \`npx convex dev\`.
- \`convex/schema.ts\` is the source of truth for all database tables.
- Use \`query\`, \`mutation\`, and \`action\` from \`convex/server\` for defining functions.
- Queries are reactive and read-only. Mutations write to the database. Actions call external services.
- Use \`ctx.db\` for database operations inside queries and mutations.
- Use \`ctx.runQuery\` / \`ctx.runMutation\` inside actions to access the database.

## Better Auth Integration

- Auth runs inside Convex via the \`@convex-dev/better-auth\` component.
- Component files live in \`convex/betterAuth/\` — edit with care.
- Auth client config is at \`lib/auth-client.ts\`; server config at \`lib/auth.ts\`.
- The Next.js API route at \`app/api/auth/[...all]/route.ts\` proxies auth requests to Convex.

## High-Risk Paths

Changes to \`convex/schema.ts\`, \`convex/betterAuth/\`, or \`lib/auth*.ts\` affect data integrity and authentication. Review these changes carefully and run \`pnpm harness:pre-pr\` before opening a PR.
`;
}
